/* ===============  Base Reset  =============== */
* { margin: 0; padding: 0; box-sizing: border-box; }

:root{
  --bg-gradient-start:#e6fffb; --bg-gradient-end:#e6f7ff;
  --brand:#0ea5a5; --brand-700:#0b8d8d; --brand-50:#e6fffb;
  --accent:#3b82f6; --accent-700:#2563eb;
  --ok:#10b981; --no:#ef4444; --na:#94a3b8;
  --ink:#0f172a; --ink-2:#334155; --muted:#64748b;
  --line:#e2e8f0; --card:#fff;
  --shadow-sm:0 1px 2px rgba(15,23,42,.06);
  --shadow:0 6px 18px rgba(2,132,199,.10);
  --radius:14px; --radius-lg:18px;
}

html,body{height:100%}
body{
  font-family:ui-sans-serif,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","PingFang TC","Microsoft JhengHei","Heiti TC",sans-serif;
  color:var(--ink); line-height:1.65;
  background:linear-gradient(160deg,var(--bg-gradient-start),var(--bg-gradient-end));
}

/* Shell */
.container{max-width:1200px;margin:0 auto;min-height:100dvh;display:flex;flex-direction:column;padding-bottom:40px}
header{
  background:linear-gradient(135deg,var(--brand) 0%,var(--accent) 100%);
  color:#fff;padding:26px 22px 14px;text-align:center;
  border-bottom-left-radius:var(--radius-lg);border-bottom-right-radius:var(--radius-lg);
  box-shadow:var(--shadow)
}
header h1{font-size:clamp(22px,2.2vw,28px);font-weight:800;letter-spacing:.2px}
.subtitle{font-size:14px;opacity:.95;margin-top:6px}

/* Top nav */
.topnav{margin-top:12px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
.topnav .nav-link{
  display:inline-block;padding:6px 12px;border:1px solid rgba(255,255,255,.25);
  color:#fff;text-decoration:none;border-radius:999px;font-size:13px;
  transition:background .16s ease,border-color .16s ease
}
.topnav .nav-link:hover{background:rgba(255,255,255,.15)}
.topnav .nav-link.active{background:rgba(255,255,255,.22);border-color:rgba(255,255,255,.35)}

.main-content{display:block;width:100%;padding:0 18px}

/* Home topics */
.home-hero{margin:26px 0 10px;text-align:center}
.home-hero h2{font-size:22px;font-weight:800;color:var(--ink)}
.home-hero p{color:var(--ink-2);margin-top:6px}

.topics{margin-top:16px;display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
@media (max-width:1100px){.topics{grid-template-columns:repeat(2,1fr)}}
@media (max-width:680px){.topics{grid-template-columns:1fr}}

.topic-card{
  background:var(--card);border:1px solid var(--line);border-radius:var(--radius);
  padding:16px;box-shadow:var(--shadow-sm);transition:transform .12s,box-shadow .12s,border-color .12s;cursor:pointer
}
.topic-card:hover{transform:translateY(-2px);border-color:rgba(37,99,235,.35);box-shadow:var(--shadow)}
.topic-emoji{font-size:28px}
.topic-title{font-size:16px;font-weight:800;margin-top:6px;color:var(--ink)}
.topic-desc{font-size:13.5px;color:var(--ink-2);margin-top:6px}
.topic-actions{margin-top:12px}
.btn{
  appearance:none;border:1px solid var(--line);background:#fff;color:var(--ink);
  border-radius:10px;padding:7px 10px;font-size:13px;cursor:pointer;transition:.16s
}
.btn:hover{border-color:var(--brand)}
.btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
.btn.primary:hover{background:var(--brand-700)}

/* Cards grid (definitions, eligibility cards, etc.) */
.cards{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
@media (max-width:1100px){.cards{grid-template-columns:repeat(2,1fr)}}
@media (max-width:680px){.cards{grid-template-columns:1fr}}
.card{
  background:var(--card);border:1px solid var(--line);border-radius:var(--radius);
  padding:14px;box-shadow:var(--shadow-sm);transition:transform .12s,box-shadow .12s,border-color .12s
}
.card:hover{transform:translateY(-2px);border-color:rgba(37,99,235,.35);box-shadow:var(--shadow)}
.card-header{display:flex;justify-content:space-between;gap:8px;align-items:flex-start;margin-bottom:6px}
.country{font-weight:800;color:var(--ink);font-size:16.5px}
.terms{color:var(--accent-700);font-weight:600;font-size:13px;margin-bottom:6px}
.summary{color:var(--ink-2);font-size:13.5px}
.actions{display:flex;gap:8px;align-items:center;margin-top:10px}
.chip{background:var(--brand-50);border:1px solid rgba(14,165,165,.35);color:#0b8d8d;font-weight:600;border-radius:999px;padding:4px 8px;font-size:12px}
.badge{display:inline-block;font-size:12px;padding:4px 8px;border-radius:999px;background:#ecfeff;color:#0b8d8d;border:1px solid rgba(14,165,165,.35)}
.fulltext{margin-top:10px;padding-top:8px;border-top:1px dashed var(--line);color:var(--ink-2);font-size:14px}
.card.multiple{border-color:rgba(14,165,165,.45);background:linear-gradient(180deg,#f6fffe,#fff)}
.variant{margin-top:8px;padding:10px;border:1px dashed var(--line);border-radius:10px;background:#fff}
.variant-header{font-size:13px;font-weight:700;color:var(--accent-700);margin-bottom:6px;display:flex;align-items:center;gap:6px}
.vindex{display:inline-block;width:22px;height:22px;line-height:22px;text-align:center;border-radius:999px;background:#eff6ff;color:#2563eb;font-size:12px;border:1px solid rgba(37,99,235,.25)}
.variant-body{font-size:14px;color:var(--ink-2)}

/* Controls bar */
.controls{
  background:var(--card);border:1px solid var(--line);border-radius:var(--radius);
  padding:14px;box-shadow:var(--shadow-sm);
  display:grid;grid-template-columns:1.2fr 1fr auto auto;gap:12px;align-items:center
}
@media (max-width:1000px){.controls{grid-template-columns:1fr}}
.searchbox input,.selectbox select,.modebox select{
  width:100%;padding:10px 12px;border:1.5px solid var(--line);border-radius:10px;background:#fff;font-size:14px;outline:none
}
.searchbox input:focus,.selectbox select:focus,.modebox select:focus{
  border-color:var(--brand);box-shadow:0 0 0 4px rgba(14,165,165,.12)
}
.tags{display:flex;gap:8px;flex-wrap:wrap}
.tag{border:1px solid var(--line);border-radius:999px;padding:6px 10px;font-size:12px;color:var(--ink-2);background:#fff;cursor:pointer;transition:.16s}
.tag:hover{border-color:var(--brand)}
.tag.active{background:var(--brand);color:#fff;border-color:var(--brand);box-shadow:0 0 0 3px rgba(14,165,165,.14)}

/* Compare drawer */
.compare-drawer{
  position:fixed;right:16px;top:96px;width:320px;max-height:calc(100dvh - 130px);overflow:auto;
  background:#ffffffd2;backdrop-filter:blur(6px);border:1px solid var(--line);border-radius:var(--radius);
  box-shadow:var(--shadow);padding:12px;display:none
}
.compare-drawer.open{display:block}
.compare-title{font-weight:800;color:var(--ink);margin-bottom:6px}
.compare-item{background:#fff;border:1px solid var(--line);border-radius:10px;padding:10px;margin-bottom:8px}
.compare-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:6px}

/* Matrix table (eligibility/reassessment) */
.matrix{
  background:var(--card);border:1px solid var(--line);border-radius:var(--radius);
  padding:12px;box-shadow:var(--shadow-sm);overflow:auto
}
.table{width:100%;border-collapse:collapse;font-size:14px}
.table th,.table td{border-bottom:1px solid var(--line);padding:10px;text-align:left;white-space:nowrap;vertical-align:top}
.table thead th{position:sticky;top:0;background:#f8fafc;z-index:1}
.flag{display:inline-flex;align-items:center;gap:6px}
.pill{display:inline-block;min-width:28px;text-align:center;padding:2px 8px;border-radius:999px;font-weight:700;font-size:12px}
.pill.y{background:#ecfdf5;color:#065f46;border:1px solid #d1fae5}
.pill.n{background:#fef2f2;color:#7f1d1d;border:1px solid #fee2e2}
.pill.na{background:#f1f5f9;color:#475569;border:1px solid #e2e8f0}
.note{color:var(--muted);font-size:12px}

/* Empty */
.empty{text-align:center;padding:40px 20px;color:var(--muted);border:1px dashed var(--line);border-radius:var(--radius);background:#ffffff90;margin-top:10px}

/* Misc */
footer{margin-top:22px;text-align:center;color:var(--muted);font-size:13px}
.fade-in{animation:fade .24s ease}
@keyframes fade{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:none}}

/* ===== ü§ñ AI Â∞çË©±ÔºàÂê´È¶ñÈ†ÅÂç°ÁâáÔºâ ===== */
.ai-card{
  background:var(--card);border:1px solid var(--line);border-radius:var(--radius-lg);
  padding:16px;box-shadow:var(--shadow-sm);max-width:960px;margin:16px auto
}
.ai-title{display:flex;align-items:center;gap:10px;font-weight:800;font-size:18px;margin-bottom:6px}
.ai-sub{color:var(--ink-2);font-size:13.5px;margin-bottom:12px}

/* Âø´ÈÄüÊèêÂïèÔºàÂèØÈªûËÜ†ÂõäÔºâ */
.ai-quick{display:flex;flex-wrap:wrap;gap:8px;margin:6px 0 10px}
.ai-quick .chip{
  display:inline-block;background:var(--brand-50);border:1px solid rgba(14,165,165,.35);
  color:#0b8d8d;font-weight:600;border-radius:999px;padding:6px 10px;font-size:12.5px;
  cursor:pointer;transition:.16s
}
.ai-quick .chip:hover{ border-color:var(--brand); box-shadow:0 0 0 3px rgba(14,165,165,.14) }

/* Ëº∏ÂÖ•ÂàóÔºàÂ§ßËº∏ÂÖ•Ê°ÜÔºâ */
.ai-input{display:flex;gap:8px;align-items:flex-start;margin:8px 0 6px}
.ai-input textarea{
  flex:1; min-height:140px;
  border:1.5px solid var(--line);border-radius:12px;padding:12px;font-size:15px;resize:vertical;outline:none
}
.ai-input textarea:focus{border-color:var(--brand);box-shadow:0 0 0 4px rgba(14,165,165,.12)}
.ai-input .btn{height:42px;padding:0 14px}

/* ËÅäÂ§©Á¥ÄÈåÑÂÆπÂô® */
.ai-chat-log{
  background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px;margin-top:8px;max-height:520px;overflow:auto
}
.ai-msg{display:flex;gap:10px;margin:10px 0}
.ai-msg .who{
  width:34px;height:34px;border-radius:50%;display:flex;align-items:center;justify-content:center;
  background:#0ea5a5;color:#fff;font-weight:800;flex:none
}
.ai-msg.user .who{background:#64748b}
.ai-msg .bubble{
  background:#f8fafc;border:1px solid var(--line);border-radius:12px;padding:10px 12px;flex:1;font-size:14.5px
}
.ai-msg.assistant .bubble{background:#f0f9ff;border-color:#cfe8ff}
.ai-actions{display:flex;gap:8px;align-items:center;margin-top:8px}
.ai-actions .status{color:var(--muted);font-size:12px}

/* ËÆì AI Áî¢Âá∫ÁöÑÊÆµËêΩ/ÂàóË°®Â•ΩËÆÄÔºàAI Â∞çË©±Ëàá Modal ÈÉΩÁîüÊïàÔºâ */
.ai-chat-log p,
#ai-body p { margin:0 0 10px; line-height:1.75; }
.ai-chat-log ul,
#ai-body ul { margin:0 0 10px; padding-left:20px; }
.ai-chat-log li,
#ai-body li { margin:4px 0; }

/* AI ModalÔºàÂç°ÁâáÊëòË¶ÅÔºâ */
.ai-modal{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(0,0,0,.18); backdrop-filter: blur(2px); z-index:9999
}
.ai-modal-content{
  width:min(860px,92vw); background:#fff; border:1px solid var(--line); border-radius:16px;
  box-shadow:var(--shadow); padding:12px
}
.ai-modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}
.ai-modal-body{max-height:70dvh;overflow:auto}
